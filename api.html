

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Python API &mdash; OpenClimateGIS 1.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenClimateGIS 1.1.0 documentation" href="index.html" />
    <link rel="next" title="Computation" href="computation.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="computation.html" title="Computation"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="python-api">
<span id="id1"></span><h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<p>Additional information on keyword arguments can be found below the initial documentation in the <a class="reference internal" href="#detailed-argument-information">Detailed Argument Information</a> section.</p>
<div class="section" id="environment-global-parameters">
<h2>Environment/Global Parameters<a class="headerlink" href="#environment-global-parameters" title="Permalink to this headline">¶</a></h2>
<p>These are global parameters used by OpenClimateGIS. For those familiar with <tt class="xref py py-mod docutils literal"><span class="pre">arcpy</span></tt> programming, this behaves similarly to the <tt class="xref py py-mod docutils literal"><span class="pre">arcpy.env</span></tt> module. Any <tt class="xref py py-mod docutils literal"><span class="pre">ocgis.env</span></tt> variable be overloaded with system environment variables by setting <cite>OCGIS_&lt;variable-name&gt;</cite>.</p>
<dl class="docutils">
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.DIR_DATA</span></tt> = <tt class="docutils literal"><span class="pre">None</span></tt></dt>
<dd>Directory(s) to search through to find data. If specified, this should be a sequence of directories. It may also be a single directory location. Note that the search may take considerable time if a very high level directory is chosen. If this variable is set, it is only necessary to specify the filename(s) when creating a <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a>.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.DIR_OUTPUT</span></tt> = <tt class="docutils literal"><span class="pre">None</span></tt> (defaults to current working directory)</dt>
<dd>The directory where output data is written. OpenClimateGIS always creates directories inside which output data is stored. Also, many of the output formats have multiple output files making a single directory location potentially troubling in terms of file quantity. If <cite>None</cite>, it defaults to the current working directory.</dd>
</dl>
<dl class="docutils" id="env-dir-shpcabinet">
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.DIR_SHPCABINET</span></tt> = &lt;path-to-directory&gt;</dt>
<dd>Location of the shapefile directory for use by <a class="reference internal" href="#ocgis.ShpCabinet" title="ocgis.ShpCabinet"><tt class="xref py py-class docutils literal"><span class="pre">ShpCabinet</span></tt></a>.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.MELTED</span></tt> = <tt class="docutils literal"><span class="pre">False</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">True</span></tt>, use a melted tabular format with all variable values collected in a single column.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.OVERWRITE</span></tt> = <tt class="docutils literal"><span class="pre">False</span></tt></dt>
<dd><div class="first admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Use with caution.</p>
</div>
<p class="last">Set to <tt class="docutils literal"><span class="pre">True</span></tt> to overwrite existing output folders. This will remove the folder if it exists!</p>
</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.PREFIX</span></tt> = <tt class="docutils literal"><span class="pre">'ocgis_output'</span></tt></dt>
<dd>The default prefix to apply to output files. This is also the output folder name.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.USE_CFUNITS</span></tt> = <tt class="docutils literal"><span class="pre">True</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">True</span></tt>, use <tt class="xref py py-mod docutils literal"><span class="pre">cfunits</span></tt> for any unit transformations. This will be automatically set to <tt class="docutils literal"><span class="pre">False</span></tt> if <tt class="xref py py-mod docutils literal"><span class="pre">cfunits</span></tt> is not available for import.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.USE_SPATIAL_INDEX</span></tt> = <tt class="docutils literal"><span class="pre">True</span></tt></dt>
<dd>If <tt class="docutils literal"><span class="pre">True</span></tt>, use <tt class="xref py py-mod docutils literal"><span class="pre">rtree</span></tt> to create spatial indices for spatial operations. This will be automatically set to <tt class="docutils literal"><span class="pre">False</span></tt> if <tt class="xref py py-mod docutils literal"><span class="pre">rtree</span></tt> is not available for import.</dd>
<dt><tt class="xref py py-attr docutils literal"><span class="pre">env.VERBOSE</span></tt> = <tt class="docutils literal"><span class="pre">False</span></tt></dt>
<dd>Indicate if additional output information should be printed to terminal.</dd>
</dl>
</div>
<div class="section" id="operations-api-ocgis-ocgoperations">
<h2>Operations API (<a class="reference internal" href="#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a>)<a class="headerlink" href="#operations-api-ocgis-ocgoperations" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocgis.OcgOperations">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">OcgOperations</tt><big>(</big><em>dataset=None</em>, <em>spatial_operation='intersects'</em>, <em>geom=None</em>, <em>aggregate=False</em>, <em>calc=None</em>, <em>calc_grouping=None</em>, <em>calc_raw=False</em>, <em>abstraction=None</em>, <em>snippet=False</em>, <em>backend='ocg'</em>, <em>prefix=None</em>, <em>output_format='numpy'</em>, <em>agg_selection=False</em>, <em>select_ugid=None</em>, <em>vector_wrap=True</em>, <em>allow_empty=False</em>, <em>dir_output=None</em>, <em>slice=None</em>, <em>file_only=False</em>, <em>headers=None</em>, <em>format_time=True</em>, <em>calc_sample_size=False</em>, <em>search_radius_mult=2.0</em>, <em>output_crs=None</em>, <em>interpolate_spatial_bounds=False</em>, <em>add_auxiliary_files=True</em>, <em>optimizations=None</em>, <em>callback=None</em>, <em>time_range=None</em>, <em>time_region=None</em>, <em>level_range=None</em>, <em>conform_units_to=None</em>, <em>select_nearest=False</em>, <em>regrid_destination=None</em>, <em>regrid_options=None</em>, <em>melted=False</em><big>)</big><a class="headerlink" href="#ocgis.OcgOperations" title="Permalink to this definition">¶</a></dt>
<dd><p>Entry point for all OCGIS operations.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The object SHOULD NOT be reused following an execution as the software may add/modify attribute
contents. Instantiate a new object following an execution.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The only required argument is <cite>dataset</cite>.</p>
</div>
<p>All keyword arguments are exposed as public attributes which may be  arbitrarily set using standard syntax:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">OcgOperations</span><span class="p">(</span><span class="n">RequestDataset</span><span class="p">(</span><span class="s">&#39;/path/to/some/dataset&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span><span class="o">.</span><span class="n">aggregate</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>The builtins <tt class="xref py py-func docutils literal"><span class="pre">__getattribute__()</span></tt> and <tt class="xref py py-func docutils literal"><span class="pre">__setattr__()</span></tt> are overloaded to perform 
validation and input formatting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dataset</strong> (<a class="reference internal" href="#ocgis.RequestDatasetCollection" title="ocgis.RequestDatasetCollection"><tt class="xref py py-class docutils literal"><span class="pre">RequestDatasetCollection</span></tt></a>, <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a>/<tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt>, or
sequence of <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a>/<tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> objects) &#8211; The target dataset(s) for the request. This is the only required parameter. All elements of
<tt class="docutils literal"><span class="pre">dataset</span></tt> will be processed.</li>
<li><strong>spatial_operation</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The geometric operation to be performed.</li>
<li><strong>geom</strong> (<em>list of dict, list of float, str</em>) &#8211; The selection geometry(s) used for the spatial subset. If <tt class="docutils literal"><span class="pre">None</span></tt>, selection defaults to entire spatial
domain.</li>
<li><strong>aggregate</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, dataset geometries are aggregated to coincident
selection geometries.</li>
<li><strong>calc</strong> (<em>list of dictionaries or string-based function</em>) &#8211; Calculations to be performed on the dataset subset.</li>
<li><strong>calc_grouping</strong> (<em>list of str or int</em>) &#8211; Temporal grouping to apply for calculations.</li>
<li><strong>calc_raw</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, perform calculations on the &#8220;raw&#8221; data regardless of <tt class="docutils literal"><span class="pre">aggregation</span></tt> flag.</li>
<li><strong>abstraction</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The geometric abstraction to use for the dataset geometries. If <cite>None</cite> (the default), use the
highest order geometry available.</li>
<li><strong>snippet</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, return a data &#8220;snippet&#8221; composed of the first time point, first level (if applicable),
and the entire spatial domain.</li>
<li><strong>backend</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The processing backend to use.</li>
<li><strong>prefix</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The output prefix to prepend to any output data filename.</li>
<li><strong>output_format</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The desired output format.</li>
<li><strong>agg_selection</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, the selection geometry will be aggregated prior to any spatial operations.</li>
<li><strong>select_ugid</strong> (<em>list of integers</em>) &#8211; The unique identifiers of specific geometries contained in canned geometry datasets. These
unique identifiers will be selected and used for spatial operations.</li>
<li><strong>vector_wrap</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <cite>True</cite>, keep any vector output on a -180 to 180 longitudinal domain.</li>
<li><strong>allow_empty</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <cite>True</cite>, do not raise an exception in the case of an empty geometric selection.</li>
<li><strong>dir_output</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The output directory to which any disk format folders are written. If the directory does not
exist, an exception will be raised. This will override <tt class="xref py py-attr docutils literal"><span class="pre">env.DIR_OUTPUT</span></tt>.</li>
<li><strong>headers</strong> (<em>sequence</em>) &#8211; A sequence of strings specifying the output headers. Default value of (&#8216;did&#8217;, &#8216;ugid&#8217;, &#8216;gid&#8217;) is
always applied.</li>
<li><strong>format_time</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt> (the default), attempt to coerce time values to datetime stamps. If <tt class="docutils literal"><span class="pre">False</span></tt>, pass
values through without a coercion attempt. This only affects <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> objects.</li>
<li><strong>calc_sample_size</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <cite>True</cite>, calculate statistical sample sizes for calculations.</li>
<li><strong>output_crs</strong> (<tt class="xref py py-class docutils literal"><span class="pre">ocgis.crs.CoordinateReferenceSystem</span></tt>) &#8211; If provided, all output geometries will be projected to match the provided CRS.</li>
<li><strong>search_radius_mult</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; This value is multiplied by the target data&#8217;s spatial resolution to determine the buffer
radius for point selection geometries.</li>
<li><strong>interpolate_spatial_bounds</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If True and no bounds are available, attempt to interpolate bounds from
centroids.</li>
<li><strong>add_auxiliary_files</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, create a new directory and add metadata and other informational files
in addition to the converted file. If <tt class="docutils literal"><span class="pre">False</span></tt>, write the target file only to <tt class="xref py py-attr docutils literal"><span class="pre">dir_output</span></tt> and do not create
a new directory.</li>
<li><strong>callback</strong> (<em>function</em>) &#8211; A function taking two parameters: <tt class="docutils literal"><span class="pre">percent_complete</span></tt> and <tt class="docutils literal"><span class="pre">message</span></tt>.</li>
<li><strong>time_range</strong> ([<a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a>, <a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a>]) &#8211; Upper and lower bounds for time dimension subsetting. If <cite>None</cite>, return all time points. Using
this argument will overload all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> <tt class="docutils literal"><span class="pre">time_range</span></tt> values.</li>
<li><strong>time_region</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; A dictionary with keys of &#8216;month&#8217; and/or &#8216;year&#8217; and values as sequences corresponding to target
month and/or year values. Empty region selection for a key may be set to <cite>None</cite>. Using this argument will overload
all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> <tt class="docutils literal"><span class="pre">time_region</span></tt> values.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;month&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2011</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">]}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>level_range</strong> (<em>[int/float, int/float]</em>) &#8211; Upper and lower bounds for level dimension subsetting. If <cite>None</cite>, return all levels. Using this
argument will overload all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> <tt class="docutils literal"><span class="pre">level_range</span></tt> values.</li>
<li><strong>conform_units_to</strong> (str or <tt class="xref py py-class docutils literal"><span class="pre">cfunits.Units</span></tt>) &#8211; Destination units for conversion. If this parameter is set, then the <tt class="xref py py-mod docutils literal"><span class="pre">cfunits</span></tt> module
must be installed. Setting this parameter will override conformed units set on <tt class="docutils literal"><span class="pre">dataset</span></tt> objects.</li>
<li><strong>select_nearest</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, the nearest geometry to the centroid of the current selection geometry is
returned. This is useful when subsetting by a point, and it is preferred to not return all geometries within the
selection radius.</li>
<li><strong>regrid_destination</strong> (str, <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">SpatialDimension</span></tt>) &#8211; If provided, regrid <tt class="docutils literal"><span class="pre">dataset</span></tt> objects using ESMPy to this destination grid. If a string
is provided, then the <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> with the corresponding name will be selected as the
destination. Please see <a class="reference internal" href="regrid.html#esmpy-regridding"><em>ESMPy Regridding</em></a> for an overview.</li>
<li><strong>regrid_options</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Overload the default keywords for regridding. Dictionary elements must map to the names
of keyword arguments for <a class="reference internal" href="regrid.html#ocgis.regrid.base.iter_regridded_fields" title="ocgis.regrid.base.iter_regridded_fields"><tt class="xref py py-meth docutils literal"><span class="pre">iter_regridded_fields()</span></tt></a>. If this is left as <tt class="docutils literal"><span class="pre">None</span></tt>, then the
default keyword values are used. Please see <a class="reference internal" href="regrid.html#esmpy-regridding"><em>ESMPy Regridding</em></a> for an overview.</li>
<li><strong>melted</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">None</span></tt>, default to <tt class="xref py py-attr docutils literal"><span class="pre">ocgis.env.MELTED</span></tt>. If <tt class="docutils literal"><span class="pre">False</span></tt> (the default), variable names are
individual columns in tabular output formats (i.e. <tt class="docutils literal"><span class="pre">'csv'</span></tt>). If <tt class="docutils literal"><span class="pre">True</span></tt>, all variable values will be collected
under a single value column.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.OcgOperations.execute">
<tt class="descname">execute</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.OcgOperations.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the request using the selected backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Path to an output file/folder or dictionary composed of <tt class="xref py py-class docutils literal"><span class="pre">ocgis.api.collection.AbstractCollection</span></tt> objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocgis.OcgOperations.get_base_request_size">
<tt class="descname">get_base_request_size</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.OcgOperations.get_base_request_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the estimated request size in kilobytes. This is the estimated size
of the requested data not the returned data product.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dictionary with keys <tt class="docutils literal"><span class="pre">'total'</span></tt> and <tt class="docutils literal"><span class="pre">'variables'</span></tt>. The <tt class="docutils literal"><span class="pre">'variables'</span></tt>
key maps a variable&#8217;s alias to its estimated value and dimension sizes, shapes, and
data types.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">get_base_request_size</span><span class="p">()</span>
<span class="go">{&#39;total&#39;:555.,</span>
<span class="go"> &#39;variables&#39;:{</span>
<span class="go">              &#39;tas&#39;:{</span>
<span class="go">                     &#39;value&#39;:{&#39;kb&#39;:500.,&#39;shape&#39;:(1,300,1,10,10),&#39;dtype&#39;:dtype(&#39;float64&#39;)},</span>
<span class="go">                     &#39;temporal&#39;:{&#39;kb&#39;:50.,&#39;shape&#39;:(300,),&#39;dtype&#39;:dtype(&#39;float64&#39;)},</span>
<span class="go">                     &#39;level&#39;:{&#39;kb&#39;:o.,&#39;shape&#39;:None,&#39;dtype&#39;:None},</span>
<span class="go">                     &#39;realization&#39;:{&#39;kb&#39;:0.,&#39;shape&#39;:None,&#39;dtype&#39;:None},</span>
<span class="go">                     &#39;row&#39;:{&#39;kb&#39;:2.5,&#39;shape&#39;:(10,),&#39;dtype&#39;:dtype(&#39;float64&#39;)},</span>
<span class="go">                     &#39;col&#39;:{&#39;kb&#39;:2.5,&#39;shape&#39;:(10,),&#39;dtype&#39;:dtype(&#39;float64&#39;)}</span>
<span class="go">                     }</span>
<span class="go">              }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<div class="section" id="detailed-argument-information">
<h3>Detailed Argument Information<a class="headerlink" href="#detailed-argument-information" title="Permalink to this headline">¶</a></h3>
<p>Additional information on arguments are found in their respective sections.</p>
<div class="section" id="abstraction">
<h4>abstraction<a class="headerlink" href="#abstraction" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">OpenClimateGIS uses the <cite>bounds</cite> attribute of NetCDF file to construct polygon representations of datasets. If no <cite>bounds</cite> attribute is found, the software defaults to the <cite>point</cite> geometry abstraction.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>polygon</cite> (default)</td>
<td>Represent cells as <tt class="xref py py-class docutils literal"><span class="pre">shapely.geometry.Polygon</span></tt> objects.</td>
</tr>
<tr class="row-odd"><td><cite>point</cite></td>
<td>Represent cells as <tt class="xref py py-class docutils literal"><span class="pre">shapely.geometry.Point</span></tt> objects.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="add-auxiliary-files">
<h4>add_auxiliary_files<a class="headerlink" href="#add-auxiliary-files" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">True</span></tt>, create a new directory and add metadata and other informational files in addition to the converted file. If <tt class="docutils literal"><span class="pre">False</span></tt>, write the target file only to <tt class="xref py py-attr docutils literal"><span class="pre">dir_output</span></tt> and do not create a new directory.</p>
</div>
<div class="section" id="aggregate">
<h4>aggregate<a class="headerlink" href="#aggregate" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>Selected geometries are combined into a single geometry (see <a class="reference internal" href="appendix.html#appendix-aggregate"><em>Aggregate (Union)</em></a>).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">False</span></tt> (default)</td>
<td>Selected geometries are not combined.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="agg-selection">
<span id="id2"></span><h4>agg_selection<a class="headerlink" href="#agg-selection" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>Aggregate (union) <a class="reference internal" href="#geom">geom</a> to a single geometry.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">False</span></tt> (default)</td>
<td>Leave <a class="reference internal" href="#geom">geom</a> as is.</td>
</tr>
</tbody>
</table>
<p>The purpose of this data manipulation is to ease the method required to aggregate (union) geometries into arbitrary regions. A simple example would be unioning the U.S. state boundaries of Utah, Nevada, Arizona, and New Mexico into a single polygon representing a &#8220;Southwestern Region&#8221;.</p>
</div>
<div class="section" id="allow-empty">
<h4>allow_empty<a class="headerlink" href="#allow-empty" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>True</cite></td>
<td>Allow the empty set for geometries not geographically coincident with a source geometry.</td>
</tr>
<tr class="row-odd"><td><cite>False</cite> (default)</td>
<td>Raise <a class="reference internal" href="exc.html#ocgis.exc.EmptyDataNotAllowed" title="ocgis.exc.EmptyDataNotAllowed"><tt class="xref py py-class docutils literal"><span class="pre">EmptyDataNotAllowed</span></tt></a> if the empty set is encountered.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="calc">
<span id="calc-headline"></span><h4>calc<a class="headerlink" href="#calc" title="Permalink to this headline">¶</a></h4>
<p>See the <a class="reference internal" href="computation.html#computation-headline"><em>Computation</em></a> page for more details.</p>
</div>
<div class="section" id="calc-grouping">
<span id="calc-grouping-headline"></span><h4>calc_grouping<a class="headerlink" href="#calc-grouping" title="Permalink to this headline">¶</a></h4>
<p>There are three forms for this argument:</p>
<ol class="arabic simple">
<li><strong>Date Part Grouping</strong>: Any combination of <tt class="docutils literal"><span class="pre">'day'</span></tt>, <tt class="docutils literal"><span class="pre">'month'</span></tt>, and <tt class="docutils literal"><span class="pre">'year'</span></tt>.</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;day&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;month&#39;</span><span class="p">,</span><span class="s">&#39;year&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;day&#39;</span><span class="p">,</span><span class="s">&#39;year&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Temporal aggregation splits date/time coordinates into parts and groups them according to <cite>unique combinations</cite> of those parts. If data is grouped by month, then all of the January times would be in one group with all of the August times in another. If a grouping of month and year are applied, then all of the January 2000 times would be in a group with all of the January 2001 times and so on.</p>
<p>Any temporal aggregation applied to a dataset should be consistent with the input data&#8217;s temporal resolution. For example, aggregating by day, month, and year on daily input dataset is not a reasonable aggregation as the data selected for aggregation will have a sample size of one (i.e. one day per aggregation group).</p>
<ol class="arabic simple" start="2">
<li><strong>Summarize Over All</strong>: The string <tt class="docutils literal"><span class="pre">'all'</span></tt> indicates the entire time domain should be summarized.</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="s">&#39;all&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><strong>Seasonal Groups</strong>: A sequence of integer sequences. Element sequences must be mutually exclusive (i.e. no repeated integers). Representative times for the climatology are chosen as the center month in a sequence (i.e. January in the sequence [12,1,2]).</li>
</ol>
<p>Month integers map as expected (1=January, 2=February, etc.). The example below constructs a single season composed of March, April, and May. Note the nested lists.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]]</span>
</pre></div>
</div>
<p>The next example consumes all the months in a year.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">]]</span>
</pre></div>
</div>
<p>Unique, time sequential seasons are possible with the <tt class="docutils literal"><span class="pre">'unique'</span></tt> flag:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s">&#39;unique&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>A <em>unique</em> season has at least one value associated with each month in the season. If a month is missing, the season will be dropped. The season specification above returns a calculation based on values with date coordinates in:</dt>
<dd><ul class="first last simple">
<li>Dec 1900, Jan 1901, Feb 1901</li>
<li>Dec 1901, Jan 1902, Feb 1902</li>
</ul>
</dd>
</dl>
<p>It is also possible to group the seasons by year.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_grouping</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s">&#39;year&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>For example, this returns a calculation based on values with date coordinates in:</dt>
<dd><ul class="first last simple">
<li>1900: Dec, Jan, Feb</li>
<li>1901: Dec, Jan, Feb</li>
<li>1902: Dec, Jan, Feb</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="calc-raw">
<span id="calc-raw-headline"></span><h4>calc_raw<a class="headerlink" href="#calc-raw" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>True</cite></td>
<td>If <tt class="xref py py-attr docutils literal"><span class="pre">ocgis.OcgOperations.aggregate</span></tt> is <cite>True</cite>, perform computations on raw, unaggregated values.</td>
</tr>
<tr class="row-odd"><td><cite>False</cite> (default)</td>
<td>Use aggregated values during computation.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="callback">
<h4>callback<a class="headerlink" href="#callback" title="Permalink to this headline">¶</a></h4>
<p>A callback function that may be used for custom messaging. This function integrates with the log handler and will receive messages at or above the <tt class="xref py py-attr docutils literal"><span class="pre">logging.INFO</span></tt> level.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">percent</span><span class="p">,</span><span class="n">message</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">print</span><span class="p">(</span><span class="n">percent</span><span class="p">,</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="conform-units-to">
<h4>conform_units_to<a class="headerlink" href="#conform-units-to" title="Permalink to this headline">¶</a></h4>
<p>Destination units for conversion. If this parameter is set, then the <tt class="xref py py-mod docutils literal"><span class="pre">cfunits</span></tt> module must be installed. Setting this parameter will override conformed units set on <tt class="docutils literal"><span class="pre">dataset</span></tt> objects.</p>
</div>
<div class="section" id="dataset">
<h4>dataset<a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>A <tt class="docutils literal"><span class="pre">dataset</span></tt> is the target file(s) or object(s) containing data to process. A <tt class="docutils literal"><span class="pre">dataset</span></tt> may be:</dt>
<dd><ol class="first last arabic simple">
<li>A file on the local machine or network location accessible by the software (use <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> or <a class="reference internal" href="#ocgis.RequestDatasetCollection" title="ocgis.RequestDatasetCollection"><tt class="xref py py-class docutils literal"><span class="pre">RequestDatasetCollection</span></tt></a>).</li>
<li>A URL to an unsecured OpenDAP dataset (use <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> or <a class="reference internal" href="#ocgis.RequestDatasetCollection" title="ocgis.RequestDatasetCollection"><tt class="xref py py-class docutils literal"><span class="pre">RequestDatasetCollection</span></tt></a>).</li>
<li>An OpenClimateGIS field object (use <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> or <a class="reference internal" href="#ocgis.RequestDatasetCollection" title="ocgis.RequestDatasetCollection"><tt class="xref py py-class docutils literal"><span class="pre">RequestDatasetCollection</span></tt></a>). If a <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> object is used, be aware operations may modify the object inplace.</li>
</ol>
</dd>
</dl>
<dl class="class">
<dt id="ocgis.RequestDataset">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">RequestDataset</tt><big>(</big><em>uri=None</em>, <em>variable=None</em>, <em>alias=None</em>, <em>units=None</em>, <em>time_range=None</em>, <em>time_region=None</em>, <em>level_range=None</em>, <em>conform_units_to=None</em>, <em>crs=None</em>, <em>t_units=None</em>, <em>t_calendar=None</em>, <em>t_conform_units_to=None</em>, <em>did=None</em>, <em>meta=None</em>, <em>s_abstraction=None</em>, <em>dimension_map=None</em>, <em>name=None</em>, <em>driver=None</em>, <em>regrid_source=True</em>, <em>regrid_destination=False</em><big>)</big><a class="headerlink" href="#ocgis.RequestDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> contains all the information necessary to find and subset a variable (by time
and/or level) contained in a local or OpenDAP-hosted CF dataset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">RequestDataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;http://some.opendap.dataset&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">## It is also okay to enter the path to a local file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;/path/to/local/file.nc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="s">&#39;tasmax&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rd</span> <span class="o">=</span> <span class="n">RequestDataset</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">variable</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>uri</strong> (<em>str or sequence</em>) &#8211; The absolute path (URLs included) to the data&#8217;s location.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;http://some.opendap.dataset&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="s">&#39;/path/to/local/file.nc&#39;</span>
<span class="go">## Multifile datasets are supported for local and remote targets.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;/path/to/local/file1.nc&#39;</span><span class="p">,</span> <span class="s">&#39;/path/to/local/file2.nc&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There is no internal checking on the ordering of the files. If the datasets should be concatenated
along the time dimension, it may be a good idea to run the sequence of URIs through a time sorting function
<a class="reference internal" href="utility.html#ocgis.util.helpers.get_sorted_uris_by_time_dimension" title="ocgis.util.helpers.get_sorted_uris_by_time_dimension"><tt class="xref py py-func docutils literal"><span class="pre">get_sorted_uris_by_time_dimension()</span></tt></a>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>variable</strong> (<em>str or sequence or None</em>) &#8211; The target variable. If the argument value is <tt class="docutils literal"><span class="pre">None</span></tt>, then a search on the target data object
will be performed to find variables having a minimum set of dimensions (i.e. time and space). The value of this
property will then be updated.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="s">&#39;tas&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variable</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;tas&#39;</span><span class="p">,</span> <span class="s">&#39;tasmax&#39;</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>alias</strong> (<em>str or sequence</em>) &#8211; An alternative name to identify the returned variable&#8217;s data. If <tt class="docutils literal"><span class="pre">None</span></tt>, this defaults to
<tt class="docutils literal"><span class="pre">variable</span></tt>. If variables having the same name occur in a request, this argument is required.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">alias</span> <span class="o">=</span> <span class="s">&#39;tas_alias&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alias</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;tas_alias&#39;</span><span class="p">,</span> <span class="s">&#39;tasmax_alias&#39;</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>time_range</strong> ([<a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a>, <a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a>]) &#8211; Upper and lower bounds for time dimension subsetting. If <tt class="docutils literal"><span class="pre">None</span></tt>, return all time points.</li>
<li><strong>time_region</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; A dictionary with keys of <tt class="docutils literal"><span class="pre">'month'</span></tt> and/or <tt class="docutils literal"><span class="pre">'year'</span></tt> and values as sequences corresponding to
target month and/or year values. Empty region selection for a key may be set to <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;month&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2011</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">]}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>level_range</strong> (<em>[int, int] or [float, float]</em>) &#8211; Upper and lower bounds for level dimension subsetting. If <tt class="docutils literal"><span class="pre">None</span></tt>, return all levels.</li>
<li><strong>crs</strong> (<tt class="xref py py-class docutils literal"><span class="pre">ocgis.crs.CoordinateReferenceSystem</span></tt>) &#8211; Overload the autodiscovered coordinate system.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis.crs</span> <span class="kn">import</span> <span class="n">CFWGS84</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span> <span class="o">=</span> <span class="n">CFWGS84</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>t_units</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Overload the autodiscover <a class="reference external" href="http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html#num2date">time units</a>.</li>
<li><strong>t_calendar</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Overload the autodiscover <a class="reference external" href="http://netcdf4-python.googlecode.com/svn/trunk/docs/netCDF4-module.html#num2date">time calendar</a>.</li>
<li><strong>t_conform_units_to</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Conform the time dimension to the provided units. The calendar may not be changed.
The option dependency <tt class="docutils literal"><span class="pre">cfunits-python</span></tt> is required.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">t_conform_units_to</span> <span class="o">=</span> <span class="s">&#39;days since 1949-1-1&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>s_abstraction</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Abstract the geometry data to either <tt class="docutils literal"><span class="pre">'point'</span></tt> or <tt class="docutils literal"><span class="pre">'polygon'</span></tt>. If <tt class="docutils literal"><span class="pre">'polygon'</span></tt> is not
possible due to missing bounds, <tt class="docutils literal"><span class="pre">'point'</span></tt> will be used instead.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">abstraction</span></tt> argument in <a class="reference internal" href="#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a> will overload this.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dimension_map</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Maps dimensions to axes in the case of a projection/realization axis or an uncommon axis
ordering. All axes must be in the dictionary.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">dimension_map</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;T&#39;</span><span class="p">:</span> <span class="s">&#39;time&#39;</span><span class="p">,</span> <span class="s">&#39;X&#39;</span><span class="p">:</span> <span class="s">&#39;longitude&#39;</span><span class="p">,</span> <span class="s">&#39;Y&#39;</span><span class="p">:</span> <span class="s">&#39;latitude&#39;</span><span class="p">,</span> <span class="s">&#39;R&#39;</span><span class="p">:</span> <span class="s">&#39;projection&#39;</span><span class="p">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>units</strong> (str or <tt class="xref py py-class docutils literal"><span class="pre">cfunits.Units</span></tt> or sequence) &#8211; The units of the source variable. This will be read from metadata if this value is <tt class="docutils literal"><span class="pre">None</span></tt>.</li>
<li><strong>conform_units_to</strong> (str or <tt class="xref py py-class docutils literal"><span class="pre">cfunits.Units</span></tt> or sequence) &#8211; Destination units for conversion. If this parameter is set, then the <tt class="xref py py-mod docutils literal"><span class="pre">cfunits</span></tt> module
must be installed.</li>
<li><strong>driver</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">None</span></tt>, autodiscover the appropriate driver. Other accepted values are listed below.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="23%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">File Extension(s)</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'netCDF'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'nc'</span></tt></td>
<td>A netCDF file using a CF metadata convention.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'vector'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'shp'</span></tt></td>
<td>An ESRI Shapefile.</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Name of the requested data in the output collection. If <tt class="docutils literal"><span class="pre">None</span></tt>, defaults to <tt class="docutils literal"><span class="pre">alias</span></tt>. If this is
a multivariate request (i.e. more than one variable) and this is <tt class="docutils literal"><span class="pre">None</span></tt>, then the aliases will be joined by
<tt class="docutils literal"><span class="pre">'_'</span></tt> to create the name.</li>
<li><strong>regrid_source</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">False</span></tt>, do not regrid this dataset. This is relevant only if a
<tt class="docutils literal"><span class="pre">regrid_destination</span></tt> dataset is present. Please see <a class="reference internal" href="regrid.html#esmpy-regridding"><em>ESMPy Regridding</em></a> for an overview.</li>
<li><strong>regrid_destination</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, use this dataset as the destination grid for a regridding operation.
Only one <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> may be set as the destination grid. Please see <a class="reference internal" href="regrid.html#esmpy-regridding"><em>ESMPy Regridding</em></a> for
an overview.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.RequestDataset.inspect">
<tt class="descname">inspect</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.RequestDataset.inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a string containing important information about the source driver.</p>
</dd></dl>

<dl class="method">
<dt id="ocgis.RequestDataset.inspect_as_dct">
<tt class="descname">inspect_as_dct</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.RequestDataset.inspect_as_dct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the target&#8217;s metadata. If the variable
is <cite>None</cite>. An attempt will be made to find the target dataset&#8217;s time bounds
raising a warning if none is found or the time variable is lacking units
and/or calendar attributes.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rd</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">RequestDataset</span><span class="p">(</span><span class="s">&#39;rhs_day_CanCM4_decadal2010_r2i1p1_20110101-20201231.nc&#39;</span><span class="p">,</span><span class="s">&#39;rhs&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">rd</span><span class="o">.</span><span class="n">inspect_as_dct</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;dataset&#39;, &#39;variables&#39;, &#39;dimensions&#39;, &#39;derived&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="p">[</span><span class="s">&#39;derived&#39;</span><span class="p">]</span>
<span class="go">OrderedDict([(&#39;Start Date&#39;, &#39;2011-01-01 12:00:00&#39;), (&#39;End Date&#39;, &#39;2020-12-31 12:00:00&#39;), (&#39;Calendar&#39;, &#39;365_day&#39;), (&#39;Units&#39;, &#39;days since 1850-1-1&#39;), (&#39;Resolution (Days)&#39;, &#39;1&#39;), (&#39;Count&#39;, &#39;8192&#39;), (&#39;Has Bounds&#39;, &#39;True&#39;), (&#39;Spatial Reference&#39;, &#39;WGS84&#39;), (&#39;Proj4 String&#39;, &#39;+proj=longlat +datum=WGS84 +no_defs &#39;), (&#39;Extent&#39;, &#39;(-1.40625, -90.0, 358.59375, 90.0)&#39;), (&#39;Interface Type&#39;, &#39;NcPolygonDimension&#39;), (&#39;Resolution&#39;, &#39;2.80091351339&#39;)])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/2.7/library/collections.html#collections.OrderedDict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">collections.OrderedDict</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocgis.RequestDatasetCollection">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">RequestDatasetCollection</tt><big>(</big><em>target=None</em><big>)</big><a class="headerlink" href="#ocgis.RequestDatasetCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> and/or <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">RequestDatasetCollection</span><span class="p">,</span> <span class="n">RequestDataset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uris</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;http://some.opendap.dataset1&#39;</span><span class="p">,</span> <span class="s">&#39;http://some.opendap.dataset2&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">variables</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;tasmax&#39;</span><span class="p">,</span> <span class="s">&#39;tasmin&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">request_datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">RequestDatset</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span><span class="n">variable</span><span class="p">)</span> <span class="k">for</span> <span class="n">uri</span><span class="p">,</span><span class="n">variable</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">uris</span><span class="p">,</span><span class="n">variables</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdc</span> <span class="o">=</span> <span class="n">RequestDatasetCollection</span><span class="p">(</span><span class="n">request_datasets</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Update object in place.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdc</span> <span class="o">=</span> <span class="n">RequestDatasetCollection</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">rd</span> <span class="ow">in</span> <span class="n">request_datasets</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">rdc</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>target</strong> (sequence[<a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> and/or <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> objects, ...]) &#8211; A sequence of request dataset or field objects.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.RequestDatasetCollection.update">
<tt class="descname">update</tt><big>(</big><em>target</em><big>)</big><a class="headerlink" href="#ocgis.RequestDatasetCollection.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an object to the collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>target</strong> (<a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> or <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt>) &#8211; The object to add.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="dir-output">
<h4>dir_output<a class="headerlink" href="#dir-output" title="Permalink to this headline">¶</a></h4>
<p>This sets the output folder for any disk formats. If this is <tt class="docutils literal"><span class="pre">None</span></tt> and <tt class="docutils literal"><span class="pre">env.DIR_OUTPUT</span></tt> is <tt class="docutils literal"><span class="pre">None</span></tt>, then output will be written to the current working directory.</p>
</div>
<div class="section" id="geom">
<span id="id3"></span><h4>geom<a class="headerlink" href="#geom" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Subsetting with multiple geometries to netCDF will result in <a class="reference internal" href="#agg-selection"><em>agg_selection</em></a> being set to <tt class="docutils literal"><span class="pre">True</span></tt>. Indexing multiple geometries using netCDF-CF convention is currently not possible.</p>
</div>
<p>If a geometry(s) is provided, it is used to subset <cite>every</cite> <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> object. Supplying a value of <tt class="docutils literal"><span class="pre">None</span></tt> (the default) results in the return of the entire spatial domain. Any shapefiles used for subsetting must include a unique integer attribute matching the value of <tt class="xref py py-attr docutils literal"><span class="pre">ocgis.constants.ocgis_unique_geometry_identifier</span></tt> and have a WGS84 latitude/longitude geographic coordinate system. If an ESRI Shapefile is being accessed and the file does not contain the unique identifier, the function <a class="reference internal" href="utility.html#ocgis.util.helpers.add_shapefile_unique_identifier" title="ocgis.util.helpers.add_shapefile_unique_identifier"><tt class="xref py py-func docutils literal"><span class="pre">add_shapefile_unique_identifier()</span></tt></a> may be used to add the appropriate unique identifier attribute.</p>
<p>There are a number of ways to parameterize the <tt class="docutils literal"><span class="pre">geom</span></tt> keyword argument:</p>
<ol class="arabic simple">
<li>Bounding Box</li>
</ol>
<p>This is a list of floats corresponding to: <cite>[min x, min y, max x, max y]</cite>. The coordinates should be WGS84 geographic.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">120.4</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">110.3</span><span class="p">,</span> <span class="mf">41.4</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Point</li>
</ol>
<p>This is a list of floats corresponding to: <cite>[longitude,latitude]</cite>. The coordinates should be WGS84 geographic. For point geometries, the geometry is actually buffered by <cite>search_radius_mult</cite> * (data resolution). Hence, output geometries are in fact polygons.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">120.4</span><span class="p">,</span><span class="mf">36.5</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Using <a class="reference internal" href="#ocgis.ShpCabinetIterator" title="ocgis.ShpCabinetIterator"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.ShpCabinetIterator</span></tt></a></li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">ShpCabinetIterator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="n">ShpCabinetIterator</span><span class="p">(</span><span class="s">&#39;state_boundaries&#39;</span><span class="p">,</span><span class="n">select_ugid</span><span class="o">=</span><span class="p">[</span><span class="mi">16</span><span class="p">])</span>
</pre></div>
</div>
<ol class="arabic simple" id="geom-key" start="4">
<li>Using a <a class="reference internal" href="#ocgis.ShpCabinet" title="ocgis.ShpCabinet"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.ShpCabinet</span></tt></a> Key</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="s">&#39;state_boundaries&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Custom Sequence of Shapely Geometry Dictionaries</li>
</ol>
<p>The <cite>crs</cite> key is optional. If it is not included, WGS84 is assumed. The <cite>properties</cite> key is also optional. If not &#8216;UGID&#8217; property is provided, defaults will be inserted.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;geom&#39;</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="s">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;UGID&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span> <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;geometry23&#39;</span><span class="p">},</span> <span class="s">&#39;crs&#39;</span><span class="p">:</span> <span class="n">CoordinateReferenceSystem</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)}</span> <span class="p">,</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Path to a Shapefile</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">geom</span> <span class="o">=</span> <span class="s">&#39;/path/to/shapefile.shp&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="headers">
<h4>headers<a class="headerlink" href="#headers" title="Permalink to this headline">¶</a></h4>
<p>Useful to limit the number of attributes included in an output file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;did&#39;</span><span class="p">,</span><span class="s">&#39;time&#39;</span><span class="p">,</span><span class="s">&#39;value&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="interpolate-spatial-bounds">
<h4>interpolate_spatial_bounds<a class="headerlink" href="#interpolate-spatial-bounds" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">True</span></tt>, attempt to interpolate bounds coordinates if they are absent. This will also extrapolate exterior bounds to avoid losing spatial coverage.</p>
</div>
<div class="section" id="melted">
<h4>melted<a class="headerlink" href="#melted" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">False</span></tt>, variable names will be individual column headers (non-melted). If <tt class="docutils literal"><span class="pre">True</span></tt>, variable names will be placed into a single column.</p>
<p>A non-melted format:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">TIME</th>
<th class="head">TAS</th>
<th class="head">TASMAX</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>30.3</td>
<td>40.3</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>32.2</td>
<td>41.7</td>
</tr>
<tr class="row-even"><td>3</td>
<td>31.7</td>
<td>40.9</td>
</tr>
</tbody>
</table>
<p>A melted format:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="40%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">TIME</th>
<th class="head">NAME</th>
<th class="head">VALUE</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>TAS</td>
<td>30.3</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>TAS</td>
<td>32.2</td>
</tr>
<tr class="row-even"><td>3</td>
<td>TAS</td>
<td>31.7</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>TASMAX</td>
<td>40.3</td>
</tr>
<tr class="row-even"><td>2</td>
<td>TASMAX</td>
<td>41.7</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>TASMAX</td>
<td>40.9</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="output-crs">
<h4>output_crs<a class="headerlink" href="#output-crs" title="Permalink to this headline">¶</a></h4>
<p>By default, the coordinate reference system (CRS) is the CRS of the input <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> object. If multiple <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> objects are part of an <a class="reference internal" href="#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a> call, then <tt class="docutils literal"><span class="pre">output_crs</span></tt> must be provided if the input CRS values of the <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.RequestDataset</span></tt></a> objects differ. The value for <tt class="docutils literal"><span class="pre">output_crs</span></tt> is an instance of <tt class="xref py py-class docutils literal"><span class="pre">ocgis.crs.CoordinateReferenceSystem</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ocgis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output_crs</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">CFWGS84</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="output-format">
<span id="output-format-headline"></span><h4>output_format<a class="headerlink" href="#output-format" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'numpy'</span></tt> (default)</td>
<td>Return a <tt class="xref py py-class docutils literal"><span class="pre">SpatialCollection</span></tt> with keys matching <cite>ugid</cite> (see <a class="reference internal" href="#geom">geom</a>).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'shp'</span></tt></td>
<td>A shapefile representation of the data.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'csv'</span></tt></td>
<td>A CSV file representation of the data.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'csv-shp'</span></tt></td>
<td>In addition to a CSV representation, shapefiles with primary key links to the CSV are provided.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'nc'</span></tt></td>
<td>A NetCDF4-CF file.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'geojson'</span></tt></td>
<td>A GeoJSON representation of the data.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'nc-ugrid-2d-flexible-mesh'</span></tt></td>
<td>A flexible mesh representation. See <a class="reference internal" href="appendix.html#d-flexible-mesh-label"><em>2D Flexible Mesh</em></a> for more details and <a class="reference internal" href="examples.html#d-flexible-mesh-example-label"><em>Converting an ESRI Shapefile to UGRID</em></a> for an example.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="regrid-destination">
<h4>regrid_destination<a class="headerlink" href="#regrid-destination" title="Permalink to this headline">¶</a></h4>
<p>Please see <a class="reference internal" href="regrid.html#esmpy-regridding"><em>ESMPy Regridding</em></a> for an overview and limitations.</p>
<p>If provided, all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> objects in <tt class="docutils literal"><span class="pre">dataset</span></tt> will be regridded to match the grid provided in the argument’s object. This argument may be one of three types: <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">SpatialDimension</span></tt>, or <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">regrid_destination</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">RequestDataset</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">&#39;/path/to/destination.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="regrid-options">
<h4>regrid_options<a class="headerlink" href="#regrid-options" title="Permalink to this headline">¶</a></h4>
<p>A dictionary with regridding options. Please see the documentation for <a class="reference internal" href="regrid.html#ocgis.regrid.base.iter_regridded_fields" title="ocgis.regrid.base.iter_regridded_fields"><tt class="xref py py-meth docutils literal"><span class="pre">iter_regridded_fields()</span></tt></a>. Dictionary elements of <tt class="docutils literal"><span class="pre">regrid_options</span></tt> correspond to the keyword arguments of this function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">regrid_options</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;with_value&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="search-radius-mult">
<span id="search-radius-mult-key"></span><h4>search_radius_mult<a class="headerlink" href="#search-radius-mult" title="Permalink to this headline">¶</a></h4>
<p>This is a scalar float value multiplied by the target data&#8217;s resolution to determine the buffer radius for the point. The default is <tt class="docutils literal"><span class="pre">2.0</span></tt>.</p>
</div>
<div class="section" id="select-nearest">
<h4>select_nearest<a class="headerlink" href="#select-nearest" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">True</span></tt>, the nearest geometry to the centroid of the current selection geometry is returned. This is useful when subsetting by a point, and it is preferred to not return all geometries within the selection radius.</p>
</div>
<div class="section" id="select-ugid">
<span id="id4"></span><h4>select_ugid<a class="headerlink" href="#select-ugid" title="Permalink to this headline">¶</a></h4>
<p>Select specific geometries from the target shapefile chosen using &#8220;<a class="reference internal" href="#geom">geom</a>&#8221;. The integer sequence selects matching UGID values from the shapefiles. For more information on adding new shapefiles or the requirements of input shapefiles, please see the section titled <a class="reference internal" href="#adding-additional-shapefile-data">Adding Additional Shapefile Data</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">select_ugid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">select_ugid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">55</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">select_ugid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>As clarification, suppose there is a shapefile called &#8220;basins.shp&#8221; (this assumes the folder containing the shapefile has been set as the value for <a class="reference internal" href="#env-dir-shpcabinet">env.DIR_SHPCABINET</a>) with the following attribute table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">UGID</th>
<th class="head">Name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>Basin A</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>Basin B</td>
</tr>
<tr class="row-even"><td>3</td>
<td>Basin C</td>
</tr>
</tbody>
</table>
<p>If the goal is to subset the data by the boundary of &#8220;Basin A&#8221; and write the resulting data to netCDF, a call to OCGIS looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ocgis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rd</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">RequestDataset</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">&#39;/path/to/data.nc&#39;</span><span class="p">,</span><span class="n">variable</span><span class="o">=</span><span class="s">&#39;tas&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">OcgOperations</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">rd</span><span class="p">,</span><span class="n">geom</span><span class="o">=</span><span class="s">&#39;basins&#39;</span><span class="p">,</span><span class="n">select_ugid</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">output_format</span><span class="o">=</span><span class="s">&#39;nc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="snippet">
<span id="snippet-headline"></span><h4>snippet<a class="headerlink" href="#snippet" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The entire spatial domain is returned unless <cite>geom</cite> is specified.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only applies for pure subsetting for limiting computations use <cite>time_range</cite> and/or <cite>time_region</cite>.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">True</span></tt></td>
<td>Return only the first time point and the first level slice (if applicable).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">False</span></tt> (default)</td>
<td>Return all data.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="spatial-operation">
<h4>spatial_operation<a class="headerlink" href="#spatial-operation" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">intersects</span></tt> (default)</td>
<td>Source geometries touching or overlapping selection geometries are returned (see <a class="reference internal" href="appendix.html#appendix-intersects"><em>Intersects (Select)</em></a>).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">clip</span></tt></td>
<td>A full geometric intersection is performed between source and selection geometries. New geometries may be created. (see <a class="reference internal" href="appendix.html#appendix-clip"><em>Clip (Intersection)</em></a>)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="time-range">
<h4>time_range<a class="headerlink" href="#time-range" title="Permalink to this headline">¶</a></h4>
<p>Upper and lower bounds for time dimension subsetting composed to a two-element sequence of <a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> objects. If <tt class="docutils literal"><span class="pre">None</span></tt>, return all time points. Using this argument will overload all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> <tt class="docutils literal"><span class="pre">time_range</span></tt> values.</p>
</div>
<div class="section" id="time-region">
<h4>time_region<a class="headerlink" href="#time-region" title="Permalink to this headline">¶</a></h4>
<p>A dictionary with keys of &#8216;month&#8217; and/or &#8216;year&#8217; and values as sequences corresponding to target month and/or year values. Empty region selection for a key may be set to <cite>None</cite>. Using this argument will overload all <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a> <tt class="docutils literal"><span class="pre">time_region</span></tt> values.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;month&#39;</span><span class="p">:[</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">],</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2011</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_region</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;year&#39;</span><span class="p">:[</span><span class="mi">2010</span><span class="p">]}</span>
</pre></div>
</div>
</div>
<div class="section" id="vector-wrap">
<h4>vector_wrap<a class="headerlink" href="#vector-wrap" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Only applicable for WGS84 spatial references.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>True</cite> (default)</td>
<td>For vector geometry outputs (e.g. <cite>shp</cite>,`keyed`) , ensure output longitudinal domain is -180 to 180.</td>
</tr>
<tr class="row-odd"><td><cite>False</cite></td>
<td>Maintain the <a class="reference internal" href="#ocgis.RequestDataset" title="ocgis.RequestDataset"><tt class="xref py py-class docutils literal"><span class="pre">RequestDataset</span></tt></a>&#8216;s longitudinal domain.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="ocgis-shpcabinet">
<h2><a class="reference internal" href="#ocgis.ShpCabinet" title="ocgis.ShpCabinet"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.ShpCabinet</span></tt></a><a class="headerlink" href="#ocgis-shpcabinet" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocgis.ShpCabinet">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">ShpCabinet</tt><big>(</big><em>path=None</em><big>)</big><a class="headerlink" href="#ocgis.ShpCabinet" title="Permalink to this definition">¶</a></dt>
<dd><p>A utility object designed for accessing shapefiles stored in a locally
accessible location.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Adjust location of :class:`ocgis.ShpCabinet` search directory.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ocgis</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ocgis</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">DIR_SHPCABINET</span> <span class="o">=</span> <span class="s">&#39;/path/to/local/shapefile/directory&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ShpCabinet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># List the shapefiles available.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;state_boundaries&#39;, &#39;mi_watersheds&#39;, &#39;world_countries&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Load geometries from the shapefile.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geoms</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">get_geoms</span><span class="p">(</span><span class="s">&#39;state_boundaries&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Absolute path the directory holding shapefile folders. Defaults to <tt class="xref py py-attr docutils literal"><span class="pre">ocgis.env.DIR_SHPCABINET</span></tt>.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.ShpCabinet.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.ShpCabinet.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of the shapefile keys contained in the search directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ocgis.ShpCabinet.iter_geoms">
<tt class="descname">iter_geoms</tt><big>(</big><em>key=None</em>, <em>select_ugid=None</em>, <em>path=None</em>, <em>load_geoms=True</em>, <em>as_spatial_dimension=False</em><big>)</big><a class="headerlink" href="#ocgis.ShpCabinet.iter_geoms" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over geometries from a shapefile specified by <tt class="docutils literal"><span class="pre">key</span></tt> or <tt class="docutils literal"><span class="pre">path</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sc</span> <span class="o">=</span> <span class="n">ShpCabinet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">geoms</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">iter_geoms</span><span class="p">(</span><span class="s">&#39;state_boundaries&#39;</span><span class="p">,</span><span class="n">select_ugid</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">48</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">geoms</span><span class="p">))</span>
<span class="go">2</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Unique key identifier for a shapefile contained in the ShpCabinet directory.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="s">&#39;state_boundaries&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>select_ugid</strong> (<em>sequence</em>) &#8211; Sequence of unique identifiers matching values from the  shapefile&#8217;s UGID attribute.
Ascending order only.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">select_ugid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Path to the target shapefile to iterate over. If <tt class="docutils literal"><span class="pre">key</span></tt> is provided it will override <tt class="docutils literal"><span class="pre">path</span></tt>.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/path/to/shapefile.shp&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>load_geoms</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">False</span></tt>, do not load geometries, excluding the <tt class="docutils literal"><span class="pre">'geom'</span></tt> key from the output
dictionary.</li>
<li><strong>as_spatial_dimension</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, yield spatial dimension objects.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first">ValueError, RuntimeError</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ocgis.ShpCabinetIterator">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">ShpCabinetIterator</tt><big>(</big><em>key=None</em>, <em>select_ugid=None</em>, <em>path=None</em>, <em>load_geoms=True</em>, <em>as_spatial_dimension=False</em><big>)</big><a class="headerlink" href="#ocgis.ShpCabinetIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over a geometry selected by <tt class="docutils literal"><span class="pre">key</span></tt> or <tt class="docutils literal"><span class="pre">path</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Unique key identifier for a shapefile contained in the ShpCabinet directory.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="s">&#39;state_boundaries&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>select_ugid</strong> (<em>sequence</em>) &#8211; Sequence of unique identifiers matching values from the shapefile&#8217;s UGID attribute.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">select_ugid</span> <span class="o">=</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Path to the target shapefile to iterate over. If <tt class="docutils literal"><span class="pre">key</span></tt> is provided it will override <tt class="docutils literal"><span class="pre">path</span></tt>.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s">&#39;/path/to/shapefile.shp&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>load_geoms</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">False</span></tt>, do not load geometries, excluding the <tt class="docutils literal"><span class="pre">'geom'</span></tt> key from the output
dictionary.</li>
<li><strong>as_spatial_dimension</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, yield as spatial dimension objects.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ocgis.ShpCabinetIterator.__iter__">
<tt class="descname">__iter__</tt><big>(</big><big>)</big><a class="headerlink" href="#ocgis.ShpCabinetIterator.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator as from <a class="reference internal" href="#ocgis.ShpCabinet.iter_geoms" title="ocgis.ShpCabinet.iter_geoms"><tt class="xref py py-meth docutils literal"><span class="pre">ocgis.ShpCabinet.iter_geoms()</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<div class="section" id="adding-additional-shapefile-data">
<h3>Adding Additional Shapefile Data<a class="headerlink" href="#adding-additional-shapefile-data" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Only add data WGS84 geographic data, ESPS=4326.</p>
</div>
<p>Shapefiles may be added to the directory mapped by the environment variable <tt class="xref py py-attr docutils literal"><span class="pre">ocgis.env.DIR_SHPCABINET</span></tt>. Shapefiles must have a unique integer attribute called &#8216;UGID&#8217;. This attribute is required for the &#8220;<a class="reference internal" href="#select-ugid">select_ugid</a>&#8221; argument to find specific geometries inside the shapefile.</p>
<p>The shapefile&#8217;s &#8220;<a class="reference internal" href="#geom-key">geom key</a>&#8221; is the name of the shapefile. It must have an alphanumeric name with no spaces with the only allowable special character being underscores &#8220;_&#8221;.</p>
</div>
</div>
<div class="section" id="ocgis-inspect">
<h2><a class="reference internal" href="#ocgis.Inspect" title="ocgis.Inspect"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.Inspect</span></tt></a><a class="headerlink" href="#ocgis-inspect" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ocgis.Inspect">
<em class="property">class </em><tt class="descclassname">ocgis.</tt><tt class="descname">Inspect</tt><big>(</big><em>uri=None</em>, <em>variable=None</em>, <em>request_dataset=None</em>, <em>meta=None</em><big>)</big><a class="headerlink" href="#ocgis.Inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect a local or remote dataset returning a printout similar to <a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/docs/netcdf/ncdump.html">ncdump</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">Inspect</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Just do an dataset attribute dump.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">Inspect</span><span class="p">(</span><span class="s">&#39;/my/local/dataset&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Get variable-specific info.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip</span> <span class="o">=</span> <span class="n">Inspect</span><span class="p">(</span><span class="s">&#39;/my/local/dataset&#39;</span><span class="p">,</span><span class="n">variable</span><span class="o">=</span><span class="s">&#39;tas&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>uri</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Absolute path to data&#8217;s location.</li>
<li><strong>variable</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Specific variable to inspect.</li>
<li><strong>interface_overload</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) &#8211; Overloads for autodiscover.</li>
<li><strong>meta</strong> (<tt class="xref py py-class docutils literal"><span class="pre">ocgis.NcMetadata</span></tt>) &#8211; Use this metadata object in place of the one created internally.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="data-collections">
<h2>Data Collections<a class="headerlink" href="#data-collections" title="Permalink to this headline">¶</a></h2>
<p>When the default output format (i.e. <tt class="docutils literal"><span class="pre">numpy</span></tt>) is returned by OpenClimateGIS, the data comes back as a dictionary with keys mapping to the <tt class="docutils literal"><span class="pre">ugids</span></tt> of the selection geometries from <a class="reference internal" href="#geom">geom</a>. If <tt class="docutils literal"><span class="pre">None</span></tt> is used for <a class="reference internal" href="#geom">geom</a>, then the <tt class="docutils literal"><span class="pre">ugid</span></tt> defaults to <tt class="docutils literal"><span class="pre">1</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">OcgOperations</span><span class="p">,</span> <span class="n">RequestDataset</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rd</span> <span class="o">=</span> <span class="n">RequestDataset</span><span class="p">(</span><span class="s">&#39;/path/to/data&#39;</span><span class="p">,</span><span class="s">&#39;tasmax&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">## default return type is NumPy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">OcgOperations</span><span class="p">(</span><span class="n">rd</span><span class="p">,</span><span class="n">snippet</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">## this the dictionary object mapping a Field to its alias</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">{&#39;tasmax&#39;:&lt;Field object&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">## this is the field object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasmax_field</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;tasmax&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Dimension and data values are accessed via instance attributes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasmax</span><span class="o">.</span><span class="n">temporal</span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasmax</span><span class="o">.</span><span class="n">level</span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasmax</span><span class="o">.</span><span class="n">spatial</span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># This is the actual data.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tasmax_field</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s">&#39;tasmax&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python API</a><ul>
<li><a class="reference internal" href="#environment-global-parameters">Environment/Global Parameters</a></li>
<li><a class="reference internal" href="#operations-api-ocgis-ocgoperations">Operations API (<tt class="docutils literal"><span class="pre">ocgis.OcgOperations</span></tt>)</a><ul>
<li><a class="reference internal" href="#detailed-argument-information">Detailed Argument Information</a><ul>
<li><a class="reference internal" href="#abstraction">abstraction</a></li>
<li><a class="reference internal" href="#add-auxiliary-files">add_auxiliary_files</a></li>
<li><a class="reference internal" href="#aggregate">aggregate</a></li>
<li><a class="reference internal" href="#agg-selection">agg_selection</a></li>
<li><a class="reference internal" href="#allow-empty">allow_empty</a></li>
<li><a class="reference internal" href="#calc">calc</a></li>
<li><a class="reference internal" href="#calc-grouping">calc_grouping</a></li>
<li><a class="reference internal" href="#calc-raw">calc_raw</a></li>
<li><a class="reference internal" href="#callback">callback</a></li>
<li><a class="reference internal" href="#conform-units-to">conform_units_to</a></li>
<li><a class="reference internal" href="#dataset">dataset</a></li>
<li><a class="reference internal" href="#dir-output">dir_output</a></li>
<li><a class="reference internal" href="#geom">geom</a></li>
<li><a class="reference internal" href="#headers">headers</a></li>
<li><a class="reference internal" href="#interpolate-spatial-bounds">interpolate_spatial_bounds</a></li>
<li><a class="reference internal" href="#melted">melted</a></li>
<li><a class="reference internal" href="#output-crs">output_crs</a></li>
<li><a class="reference internal" href="#output-format">output_format</a></li>
<li><a class="reference internal" href="#regrid-destination">regrid_destination</a></li>
<li><a class="reference internal" href="#regrid-options">regrid_options</a></li>
<li><a class="reference internal" href="#search-radius-mult">search_radius_mult</a></li>
<li><a class="reference internal" href="#select-nearest">select_nearest</a></li>
<li><a class="reference internal" href="#select-ugid">select_ugid</a></li>
<li><a class="reference internal" href="#snippet">snippet</a></li>
<li><a class="reference internal" href="#spatial-operation">spatial_operation</a></li>
<li><a class="reference internal" href="#time-range">time_range</a></li>
<li><a class="reference internal" href="#time-region">time_region</a></li>
<li><a class="reference internal" href="#vector-wrap">vector_wrap</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ocgis-shpcabinet"><tt class="docutils literal"><span class="pre">ocgis.ShpCabinet</span></tt></a><ul>
<li><a class="reference internal" href="#adding-additional-shapefile-data">Adding Additional Shapefile Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ocgis-inspect"><tt class="docutils literal"><span class="pre">ocgis.Inspect</span></tt></a></li>
<li><a class="reference internal" href="#data-collections">Data Collections</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="computation.html"
                        title="next chapter">Computation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="computation.html" title="Computation"
             >next</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, University of Michigan-Ann Arbor, Michigan Technological University, University of Colorado-Boulder.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>