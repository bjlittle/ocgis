

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utility Functions &mdash; OpenClimateGIS 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="OpenClimateGIS 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Constants" href="constants.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="constants.html" title="Constants"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-ocgis">
<span id="utility-functions"></span><h1>Utility Functions<a class="headerlink" href="#module-ocgis" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="ocgis.format_return">
<tt class="descclassname">ocgis.</tt><tt class="descname">format_return</tt><big>(</big><em>ret_path</em>, <em>ops</em>, <em>with_auxiliary_files=False</em><big>)</big><a class="headerlink" href="#ocgis.format_return" title="Permalink to this definition">¶</a></dt>
<dd><p>Format an OpenClimateGIS path returning an absolute path to a zip file or simply passing <cite>ret_path</cite> through.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ocgis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">OcgOperations</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_path</span> <span class="o">=</span> <span class="n">ocgis</span><span class="o">.</span><span class="n">format_return</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span><span class="n">ops</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ret_path</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The path returned by <a class="reference internal" href="api.html#ocgis.OcgOperations.execute" title="ocgis.OcgOperations.execute"><tt class="xref py py-func docutils literal"><span class="pre">ocgis.OcgOperations.execute()</span></tt></a>.</li>
<li><strong>ops</strong> (<a class="reference internal" href="api.html#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a>) &#8211; Instance of <a class="reference internal" href="api.html#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a>.</li>
<li><strong>with_auxiliary_files</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <cite>True</cite>, zip additional contents of CSV and netCDF returns.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first">NotImplementedError</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-ocgis.util.helpers"></span><dl class="function">
<dt id="ocgis.util.helpers.get_interpolated_bounds">
<tt class="descclassname">ocgis.util.helpers.</tt><tt class="descname">get_interpolated_bounds</tt><big>(</big><em>centroids</em><big>)</big><a class="reference internal" href="_modules/ocgis/util/helpers.html#get_interpolated_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocgis.util.helpers.get_interpolated_bounds" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>centroids</strong> (<em>np.ndarray</em>) &#8211; Vector representing center coordinates from which
to interpolate bounds.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body">NotImplementedError, ValueError</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centroids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_interpolated_bounds</span><span class="p">(</span><span class="n">centroids</span><span class="p">)</span>
<span class="go">np.array([[0, 1],[1, 2],[2, 3]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="ocgis.util.helpers.get_sorted_uris_by_time_dimension">
<tt class="descclassname">ocgis.util.helpers.</tt><tt class="descname">get_sorted_uris_by_time_dimension</tt><big>(</big><em>uris</em>, <em>variable=None</em><big>)</big><a class="reference internal" href="_modules/ocgis/util/helpers.html#get_sorted_uris_by_time_dimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocgis.util.helpers.get_sorted_uris_by_time_dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort a sequence of NetCDF URIs by the maximum time extent in ascending order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>uris</strong> (<em>list[str]</em>) &#8211; The sequence of NetCDF URIs to sort.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">uris</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;/path/to/file2.nc&#39;</span><span class="p">,</span> <span class="s">&#39;path/to/file1.nc&#39;</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>variable</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; The target variable for sorting. If <tt class="docutils literal"><span class="pre">None</span></tt> is provided, then the variable will be
autodiscovered.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A sequence of sorted URIs.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[str]</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="module-ocgis.util.large_array"></span><dl class="function">
<dt id="ocgis.util.large_array.compute">
<tt class="descclassname">ocgis.util.large_array.</tt><tt class="descname">compute</tt><big>(</big><em>ops</em>, <em>tile_dimension</em>, <em>verbose=False</em>, <em>use_optimizations=True</em><big>)</big><a class="reference internal" href="_modules/ocgis/util/large_array.html#compute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ocgis.util.large_array.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Used for computations on large arrays where memory limitations are a consideration. It is is also useful for
extracting data from a server that has limitations on the size of requested data arrays. This function creates an
empty destination NetCDF file that is then filled by executing the operations on chunks of the requested
target dataset(s) and filling the destination NetCDF file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ops</strong> (<a class="reference internal" href="api.html#ocgis.OcgOperations" title="ocgis.OcgOperations"><tt class="xref py py-class docutils literal"><span class="pre">ocgis.OcgOperations</span></tt></a>) &#8211; The target operations to tile. There must be a calculation associated with
the operations.</li>
<li><strong>tile_dimension</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; The target tile/chunk dimension. This integer value must be greater than zero.</li>
<li><strong>verbose</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, print more verbose information to terminal.</li>
<li><strong>use_optimizations</strong> (<a class="reference external" href="http://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; If <tt class="docutils literal"><span class="pre">True</span></tt>, cache <tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt> and <tt class="xref py py-class docutils literal"><span class="pre">TemporalGroupDimension</span></tt> objects for
reuse during tile iteration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first">AssertionError, ValuError</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Path to the output NetCDF file.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis</span> <span class="kn">import</span> <span class="n">RequestDataset</span><span class="p">,</span> <span class="n">OcgOperations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ocgis.util.large_array</span> <span class="kn">import</span> <span class="n">compute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rd</span> <span class="o">=</span> <span class="n">RequestDataset</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">&#39;/path/to/file&#39;</span><span class="p">,</span><span class="n">variable</span><span class="o">=</span><span class="s">&#39;tas&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ops</span> <span class="o">=</span> <span class="n">OcgOperations</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">rd</span><span class="p">,</span><span class="n">calc</span><span class="o">=</span><span class="p">[{</span><span class="s">&#39;func&#39;</span><span class="p">:</span><span class="s">&#39;mean&#39;</span><span class="p">,</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;mean&#39;</span><span class="p">}],</span><span class="n">output_format</span><span class="o">=</span><span class="s">&#39;nc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ret</span> <span class="o">=</span> <span class="n">compute</span><span class="p">(</span><span class="n">ops</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="examples.html"
                        title="previous chapter">Examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="constants.html"
                        title="next chapter">Constants</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/utility.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="constants.html" title="Constants"
             >next</a></li>
        <li class="right" >
          <a href="examples.html" title="Examples"
             >previous</a> |</li>
        <li><a href="index.html">OpenClimateGIS 1.0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, University of Michigan-Ann Arbor, Michigan Technological University, University of Colorado-Boulder.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>